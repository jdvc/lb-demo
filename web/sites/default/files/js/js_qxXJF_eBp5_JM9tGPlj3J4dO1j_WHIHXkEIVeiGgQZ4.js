/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
/*!
 * jQuery UI Autocomplete 1.14.1
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./menu","../keycode","../position","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.autocomplete",{version:"1.14.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,u="input"===n;this.isMultiLine=o||!u&&"true"===this.element.prop("contentEditable"),this.valueMethod=this.element[o||u?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case o.UP:t=!0,this._keyEvent("previous",n);break;case o.DOWN:t=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){if(s)return s=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var s,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(s=i.item.attr("aria-label")||n.value)&&String.prototype.trim.call(s).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(s))}),100))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.trigger("focus"),this.previous=s),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||s)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,(function(e,i){s._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return s.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(i))}),100))}}),e.ui.autocomplete}));

/*!
 * jQuery UI Menu 1.14.1
 * https://jqueryui.com
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../unique-id","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.menu",{version:"1.14.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target),s=e(this.document[0].activeElement);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(t){this._delay((function(){!e.contains(this.element[0],this.document[0].activeElement)&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),s=e(t.currentTarget);i[0]===s[0]&&(s.is(".ui-state-active")||(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,s)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var i,s,n,a,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,s=this.previousFilter||"",a=!1,n=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,s,n,a=this,u=this.options.icons.submenu,o=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),s=e("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+u),i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(t=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);a._isDivider(t)&&a._addClass(t,"ui-menu-divider","ui-widget-content")})),n=(s=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,s,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,u,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),u=this.activeMenu.height(),o=t.outerHeight(),n<0?this.activeMenu.scrollTop(a+n):n+o>u&&this.activeMenu.scrollTop(a+n-u+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),i?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),s&&s.length&&this.active||(s=this._menuItems(this.activeMenu)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s-n<0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,s,n;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s+n>0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return s.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}})}));

(function($,Drupal){let autocomplete;function autocompleteSplitValues(value){const result=[];let quote=false;let current='';const valueLength=value.length;let character;for(let i=0;i<valueLength;i++){character=value.charAt(i);if(character==='"'){current+=character;quote=!quote;}else if(character===','&&!quote){result.push(current.trim());current='';}else current+=character;}if(value.length>0)result.push(current.trim());return result;}function extractLastTerm(terms){return autocomplete.splitValues(terms).pop();}function searchHandler(event){const options=autocomplete.options;if(options.isComposing)return false;const term=autocomplete.extractLastTerm(event.target.value);if(term.length>0&&options.firstCharacterBlacklist.includes(term[0]))return false;return term.length>=options.minLength;}function sourceData(request,response){const elementId=this.element.attr('id');if(!(elementId in autocomplete.cache))autocomplete.cache[elementId]={};function showSuggestions(suggestions){const tagged=autocomplete.splitValues(request.term);const il=tagged.length;for(let i=0;i<il;i++)if(suggestions.includes(tagged[i]))suggestions.splice(suggestions.indexOf(tagged[i]),1);response(suggestions);}const term=autocomplete.extractLastTerm(request.term);function sourceCallbackHandler(data){autocomplete.cache[elementId][term]=data;showSuggestions(data);}if(autocomplete.cache[elementId].hasOwnProperty(term))showSuggestions(autocomplete.cache[elementId][term]);else{const options=$.extend({success:sourceCallbackHandler,data:{q:term}},autocomplete.ajax);$.ajax(this.element.attr('data-autocomplete-path'),options);}}function focusHandler(){return false;}function selectHandler(event,ui){const terms=autocomplete.splitValues(event.target.value);terms.pop();terms.push(ui.item.value);event.target.value=terms.join(', ');return false;}function renderItem(ul,item){return $('<li>').append($('<a>').html(item.label)).appendTo(ul);}Drupal.behaviors.autocomplete={attach(context){once('autocomplete','input.form-autocomplete',context).forEach((element)=>{const $autocomplete=$(element);const blacklist=$autocomplete.attr('data-autocomplete-first-character-blacklist');$.extend(autocomplete.options,{firstCharacterBlacklist:blacklist||''});$autocomplete.autocomplete(autocomplete.options).each(function(){$(this).data('ui-autocomplete')._renderItem=autocomplete.options.renderItem;});$autocomplete.on('compositionstart.autocomplete',()=>{autocomplete.options.isComposing=true;});$autocomplete.on('compositionend.autocomplete',()=>{autocomplete.options.isComposing=false;});});},detach(context,settings,trigger){if(trigger==='unload')$(once.remove('autocomplete','input.form-autocomplete',context)).autocomplete('destroy');}};autocomplete={cache:{},splitValues:autocompleteSplitValues,extractLastTerm,options:{source:sourceData,focus:focusHandler,search:searchHandler,select:selectHandler,renderItem,minLength:1,firstCharacterBlacklist:'',isComposing:false},ajax:{dataType:'json',jsonp:false}};Drupal.autocomplete=autocomplete;})(jQuery,Drupal);;
function rgb2hex(orig){var rgb=orig.replace(/\s/g,'').match(/^rgba?\((\d+),(\d+),(\d+)/i);return (rgb&&rgb.length===4)?"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):orig;}var getContrast=function(hexcolor){if(hexcolor.slice(0,1)==='#')hexcolor=hexcolor.slice(1);if(hexcolor.length===3)hexcolor=hexcolor.split('').map(function(hex){return hex+hex;}).join('');var r=parseInt(hexcolor.substr(0,2),16);var g=parseInt(hexcolor.substr(2,2),16);var b=parseInt(hexcolor.substr(4,2),16);var yiq=((r*299)+(g*587)+(b*114))/1000;return (yiq>=128)?'dark':'light';};;
(function($,Drupal,once){"use strict";Drupal.behaviors.backgroundColorLayoutBuilderForm={attach:function(context){once('blb_bg-color',".fieldgroup.field-background-color input[type=radio]",context).forEach(function(value,i){if($(value).val()!='_none'){$(value).next('label').addClass($(value).val());var bgColor=$(value).next('label').css('background-color');var bgColorHex=rgb2hex(bgColor);var bgColorContrast=getContrast(bgColorHex);$(value).next('label').addClass('bs_yiq-'+bgColorContrast);}});$(".fieldgroup.field-background-color .fieldset-wrapper label",context).on('click',function(){$(this).parents('.fieldset-wrapper').find('label').removeClass('active');$(this).parents('.fieldset-wrapper').addClass('style-selected').find('input').prop("checked",false);if($(this).hasClass('_none'))$(this).parents('.fieldset-wrapper').removeClass('style-selected');});$(".fieldgroup.field-background-color .fieldset-wrapper input:radio",context).each(function(){$(this).closest('.radio').find('label').addClass($(this).val());var checked=$(this).prop("checked");if(typeof checked!==typeof undefined&&checked!==false)$(this).closest('.radio').find('label').addClass('active');});}};})(jQuery,Drupal,once);;
(function($,Drupal,once){"use strict";Drupal.behaviors.borderLayoutBuilderForm={attach:function(context){once('blb_border','input.bs-field-border-color',context).forEach(function(value,i){var border_color='';if($(value).val()!='_none'&&typeof $(value).next('label').css('border-color')!='undefined'){border_color=$(value).next('label').css('border-color');$(value).next('label').attr('style','background-color: '+border_color+' !important; border-color: white !important;');}});var directions=['left','top','right','bottom'];for(var i=0;i<directions.length;i++){var direction=directions[i];once('blb_border','input.bs-field-border-style-'+direction,context).forEach(function(value){var border_style='';if($(value).val()!=='_none'&&typeof $(value).next('label').css('border-style')!=='undefined'){border_style=$(value).next('label').css('border-'+direction+'-style');$(value).next('label').css('border-style',border_style);}});once('blb_border','input.bs-field-border-color-'+direction,context).forEach(function(value){var border_color='';if($(value).val()!=='_none'&&typeof $(value).next('label').css('border-color')!=='undefined'){border_color=$(value).next('label').css('border-'+direction+'-color');$(value).next('label').attr('style','background-color: '+border_color+' !important; border-color: white !important;');}});}}};})(jQuery,Drupal,once);;
(function($,Drupal,once){"use strict";Drupal.behaviors.textColorLayoutBuilderForm={attach:function(context){once('blb_text-color',".fieldgroup.field-text-color input[type=radio]",context).forEach(function(value,i){$(value).next('label').addClass($(value).val());if($(value).val()!='_none'){var label_color=$(value).next('label').css('color');$(value).next('label').css('background-color',label_color);var bgColor=$(value).next('label').css('background-color');var bgColorHex=rgb2hex(bgColor);var bgColorContrast=getContrast(bgColorHex);$(value).next('label').addClass('bs_yiq-'+bgColorContrast);}});$(".fieldgroup.field-text-color .fieldset-wrapper label",context).on('click',function(){$(this).parents('.fieldset-wrapper').find('label').removeClass('active');if($(this).hasClass('_none'))$(this).parents('.fieldset-wrapper').removeClass('style-selected');});$(".fieldgroup.field-text-color .fieldset-wrapper input:radio",context).each(function(){$(this).closest('.radio').find('label').addClass($(this).val());var checked=$(this).prop("checked");if(typeof checked!==typeof undefined&&checked!==false)$(this).closest('.radio').find('label').addClass('active');});}};})(jQuery,Drupal,once);;
(function($,Drupal,once){"use strict";Drupal.behaviors.borderPreview={attach:function(context,settings){var border_width=settings.bootstrap_styles.border.border_width;var rounded_corners=settings.bootstrap_styles.border.rounded_corners;var directions=['left','top','right','bottom'];var corners=['top_left','top_right','bottom_left','bottom_right'];function refreshPreviewClasses(){var border_classes='';$('input.bs-field-border-style').each(function(){if($(this).is(':checked')&&$(this).val()!='_none')border_classes+=$(this).val()+' ';});var border_width_val=$('input.bs-field-border-width').val();var border_width_class=border_width.border_width[border_width_val];if(border_width_class!='_none')border_classes+=border_width_class+' ';$('input.bs-field-border-color').each(function(){if($(this).is(':checked')&&$(this).val()!='_none')border_classes+=$(this).val()+' ';});for(var i=0;i<directions.length;i++){$('input.bs-field-border-style-'+directions[i]).each(function(){if($(this).is(':checked')&&$(this).val()!='_none')border_classes+=$(this).val()+' ';});border_width_val=$('input.bs-field-border-width-'+directions[i]).val();if(border_width_val){border_width_class=border_width['border_'+directions[i]+'_width'][border_width_val];if(border_width_class!='_none')border_classes+=border_width_class+' ';}$('input.bs-field-border-color-'+directions[i]).each(function(){if($(this).is(':checked')&&$(this).val()!='_none')border_classes+=$(this).val()+' ';});}var rounded_corners_val=$('input.bs-field-rounded-corners').val();var rounded_corners_class=rounded_corners.rounded_corners[rounded_corners_val];if(rounded_corners_class!='_none')border_classes+=rounded_corners_class+' ';for(var i=0;i<corners.length;i++){rounded_corners_val=$('input.bs-field-rounded-corner-'+corners[i]).val();if(rounded_corners_val){rounded_corners_class=rounded_corners['rounded_corner_'+corners[i]][rounded_corners_val];if(rounded_corners_class!='_none')border_classes+=rounded_corners_class+' ';}}$('#bs-border-preview').removeClass();$('#bs-border-preview').addClass(border_classes);}refreshPreviewClasses();var input_triggers=['input[class^="bs-field-border-style"]','input[class^="bs-field-border-width"]','input[class^="bs-field-border-color"]','input[class^="bs-field-rounded-corner"]'];$.each(input_triggers,function(index,value){$(value,context).on('change',function(){$(this).parents('.fieldset-wrapper').addClass('style-selected');refreshPreviewClasses();});});}};})(jQuery,Drupal,once);;
(function($,Drupal,once){"use strict";Drupal.behaviors.shadowPreview={attach:function(context){var previewElement=$('.bs-shadow-preview [data-bs-element="bs_preview-element"]');function refreshShadowClasses(el){var shadow_classes='';$('input.bs-field-box-shadow').each(function(){if($(this).is(':checked')&&$(this).val()!='_none')shadow_classes+=$(this).val()+' ';});previewElement.removeClass();previewElement.addClass(shadow_classes);}refreshShadowClasses();var input_triggers=['input[class^="bs-field-box-shadow"]'];$.each(input_triggers,function(index,value){$(value,context).on('change',function(){refreshShadowClasses();});});function togglePreviewBackgroundColor(el){var previewBgElement=el.closest('[data-bs-element="bs_preview-box"]');previewBgElement.attr('data-bs-mode',previewBgElement.attr('data-bs-mode')==='light'?'dark':'light');}$('.bs-shadow-preview .bs-toggle-switch',context).on('change',function(){togglePreviewBackgroundColor($(this));});}};})(jQuery,Drupal,once);;
(function($,Drupal,once){"use strict";Drupal.behaviors.spacingPreview={attach:function(context,settings){var spacing=settings.bootstrap_styles.spacing;var breakpoints=settings.bootstrap_styles.breakpoints;var padding_box_shadow=$('.spacing-preview .padding-box').css('box-shadow');var margin_box_shadow=$('.spacing-preview .margin-box').css('box-shadow');var box_shadow='0 0 0 1.5rem';function calcPadding(){var padding_val=$('input.bs-field-padding').val();var padding_left_val=$('input.bs-field-padding-left').val();var padding_top_val=$('input.bs-field-padding-top').val();var padding_right_val=$('input.bs-field-padding-right').val();var padding_bottom_val=$('input.bs-field-padding-bottom').val();var padding_classes='';var padding_class=spacing.padding_classes_options.padding[padding_val];if(padding_class!='_none')padding_classes+=padding_class+' ';var padding_left_class=spacing.padding_classes_options.padding_left[padding_left_val];if(padding_left_class!='_none')padding_classes+=padding_left_class+' ';var padding_top_class=spacing.padding_classes_options.padding_top[padding_top_val];if(padding_top_class!='_none')padding_classes+=padding_top_class+' ';var padding_right_class=spacing.padding_classes_options.padding_right[padding_right_val];if(padding_right_class!='_none')padding_classes+=padding_right_class+' ';var padding_bottom_class=spacing.padding_classes_options.padding_bottom[padding_bottom_val];if(padding_bottom_class!='_none')padding_classes+=padding_bottom_class+' ';padding_classes+=getActiveBreakpointPaddingClasses();$('#bs_spacing_preview_calc').removeClass();$('#bs_spacing_preview_calc').addClass(padding_classes);$('.spacing-preview .padding-left').text(parseInt($('#bs_spacing_preview_calc').css('padding-left')));$('.spacing-preview .padding-top').text(parseInt($('#bs_spacing_preview_calc').css('padding-top')));$('.spacing-preview .padding-right').text(parseInt($('#bs_spacing_preview_calc').css('padding-right')));$('.spacing-preview .padding-bottom').text(parseInt($('#bs_spacing_preview_calc').css('padding-bottom')));}function getActiveBreakpointPaddingClasses(){var padding_classes='';var active_breakpoint=$('.bs_responsive_spacing input:checked').val();if(typeof active_breakpoint!=='undefined'){var i;var padding_classes='';for(i=0;i<breakpoints.length;i++)if(active_breakpoint==breakpoints[i]){var padding_val=$('input.bs-field-padding-'+breakpoints[i]).val();var padding_left_val=$('input.bs-field-padding-left-'+breakpoints[i]).val();var padding_top_val=$('input.bs-field-padding-top-'+breakpoints[i]).val();var padding_right_val=$('input.bs-field-padding-right-'+breakpoints[i]).val();var padding_bottom_val=$('input.bs-field-padding-bottom-'+breakpoints[i]).val();var padding_class=spacing.padding_classes_options['padding_'+breakpoints[i]][padding_val];if(padding_class!='_none')padding_classes+=padding_class+' ';var padding_left_class=spacing.padding_classes_options['padding_left_'+breakpoints[i]][padding_left_val];if(padding_left_class!='_none')padding_classes+=padding_left_class+' ';var padding_top_class=spacing.padding_classes_options['padding_top_'+breakpoints[i]][padding_top_val];if(padding_top_class!='_none')padding_classes+=padding_top_class+' ';var padding_right_class=spacing.padding_classes_options['padding_right_'+breakpoints[i]][padding_right_val];if(padding_right_class!='_none')padding_classes+=padding_right_class+' ';var padding_bottom_class=spacing.padding_classes_options['padding_bottom_'+breakpoints[i]][padding_bottom_val];if(padding_bottom_class!='_none')padding_classes+=padding_bottom_class+' ';}}return padding_classes;}function calcMargin(){var margin_val=$('input.bs-field-margin').val();var margin_left_val=$('input.bs-field-margin-left').val();var margin_top_val=$('input.bs-field-margin-top').val();var margin_right_val=$('input.bs-field-margin-right').val();var margin_bottom_val=$('input.bs-field-margin-bottom').val();var margin_classes='';var margin_class=spacing.margin_classes_options.margin[margin_val];if(margin_class!='_none')margin_classes+=margin_class+' ';var margin_left_class=spacing.margin_classes_options.margin_left[margin_left_val];if(margin_left_class!='_none')margin_classes+=margin_left_class+' ';var margin_top_class=spacing.margin_classes_options.margin_top[margin_top_val];if(margin_top_class!='_none')margin_classes+=margin_top_class+' ';var margin_right_class=spacing.margin_classes_options.margin_right[margin_right_val];if(margin_right_class!='_none')margin_classes+=margin_right_class+' ';var margin_bottom_class=spacing.margin_classes_options.margin_bottom[margin_bottom_val];if(margin_bottom_class!='_none')margin_classes+=margin_bottom_class+' ';$('#bs_spacing_preview_calc').removeClass();$('#bs_spacing_preview_calc').addClass(margin_classes);$('.spacing-preview .margin-left').text(parseInt($('#bs_spacing_preview_calc').css('margin-left')));$('.spacing-preview .margin-top').text(parseInt($('#bs_spacing_preview_calc').css('margin-top')));$('.spacing-preview .margin-right').text(parseInt($('#bs_spacing_preview_calc').css('margin-right')));$('.spacing-preview .margin-bottom').text(parseInt($('#bs_spacing_preview_calc').css('margin-bottom')));}calcPadding();calcMargin();$('input[class^="bs-field-padding"], .bs_responsive_spacing input',context).on('change',function(){calcPadding();});$('input[class^="bs-field-padding"]',context).on('focus',function(){var panel_bg=$(this).parents('details').find('summary').css('background-color');var inactive_box_shadow=box_shadow+' '+panel_bg;$('.spacing-preview .margin-box').css('box-shadow',inactive_box_shadow);$('.spacing-preview .padding-box').addClass('bs-adjusting');});$('input[class^="bs-field-padding"]',context).on('focusout',function(){$('.spacing-preview .margin-box').css('box-shadow',margin_box_shadow);$('.spacing-preview .padding-box').removeClass('bs-adjusting');});$('input[class^="bs-field-margin"]',context).on('change',function(){calcMargin();});$('input[class^="bs-field-margin"]',context).on('focus',function(){var panel_bg=$(this).parents('details').find('summary').css('background-color');var inactive_box_shadow=box_shadow+' '+panel_bg;$('.spacing-preview .padding-box').css('box-shadow',inactive_box_shadow);$('.spacing-preview .margin-box').addClass('bs-adjusting');});$('input[class^="bs-field-margin"]',context).on('focusout',function(){$('.spacing-preview .padding-box').css('box-shadow',padding_box_shadow);$('.spacing-preview .margin-box').removeClass('bs-adjusting');});}};})(jQuery,Drupal,once);;
